#!/bin/bash

echo "ğŸš€ Starting Comprehensive Employee Monitoring System Demo"
echo "========================================================="
echo ""

# Check if backend is running
echo "ğŸ“¡ Checking backend server..."
if curl -s http://localhost:3001/health > /dev/null; then
    echo "âœ… Backend server is running on port 3001"
else
    echo "ğŸ”„ Starting backend server..."
    node simple_backend.js &
    BACKEND_PID=$!
    echo "âœ… Backend server started (PID: $BACKEND_PID)"
    sleep 2
fi

echo ""
echo "ğŸ” Comprehensive Monitoring Features Available:"
echo "=============================================="
echo ""
echo "ğŸ“Š REAL-TIME ACTIVITY TRACKING:"
echo "  âŒ¨ï¸  Keystroke monitoring with context"
echo "  ğŸ–±ï¸  Mouse events and coordinates"
echo "  ğŸ–¥ï¸  Application usage and switching"
echo "  ğŸŒ Browser activity and URL tracking"
echo "  ğŸ“ File operations and access patterns"
echo "  ğŸ“¸ Automated screenshot capture"
echo "  â±ï¸  Idle time detection"
echo "  ğŸ“ˆ Productivity scoring and analytics"
echo ""
echo "ğŸ”’ PRIVACY & COMPLIANCE:"
echo "  âœ… GDPR-compliant consent management"
echo "  ğŸ” End-to-end data encryption"
echo "  ğŸ‘ï¸  Complete data transparency"
echo "  ğŸ“¤ Data export capabilities"
echo "  âš™ï¸  Granular privacy controls"
echo ""
echo "ğŸ“± USER INTERFACE:"
echo "  ğŸ“‹ Employee dashboard with real-time counters"
echo "  ğŸ“Š Detailed activity tabs (8 categories)"
echo "  ğŸ“ˆ Productivity analytics and insights"
echo "  ğŸ¯ Role-based access control"
echo "  ğŸ“Š Manager and admin dashboards"
echo ""

echo "ğŸ¯ DEMO ACCOUNTS:"
echo "================"
echo "ğŸ‘¤ Employee: employee@demo.com / Demo123!"
echo "ğŸ‘¥ Manager:  manager@demo.com / Demo123!"
echo "ğŸ”§ Admin:    admin@demo.com / Demo123!"
echo ""

echo "ğŸ”§ TECHNICAL ARCHITECTURE:"
echo "=========================="
echo "ğŸ“± Flutter UI with Material Design 3"
echo "ğŸ Native macOS integration (Swift + Accessibility APIs)"
echo "ğŸ”„ Real-time event processing and batching"
echo "ğŸ’¾ Secure local storage with AES encryption"
echo "ğŸŒ RESTful API with JWT authentication"
echo "ğŸ“Š AI-powered productivity classification"
echo ""

echo "ğŸ“‹ MONITORING CAPABILITIES:"
echo "==========================="
echo ""
echo "1. KEYSTROKE MONITORING:"
echo "   â€¢ Every key press with timing and context"
echo "   â€¢ Modifier keys (Shift, Ctrl, Alt, Cmd)"
echo "   â€¢ Typing speed and rhythm analysis"
echo "   â€¢ Application and window context"
echo ""
echo "2. MOUSE ACTIVITY:"
echo "   â€¢ Click events with coordinates"
echo "   â€¢ Mouse movements and patterns"
echo "   â€¢ Scroll wheel activity"
echo "   â€¢ Drag and drop operations"
echo ""
echo "3. APPLICATION TRACKING:"
echo "   â€¢ App launches, exits, and focus changes"
echo "   â€¢ Time spent in each application"
echo "   â€¢ Process information and resource usage"
echo "   â€¢ Application switching frequency"
echo ""
echo "4. BROWSER MONITORING:"
echo "   â€¢ URLs visited and page titles"
echo "   â€¢ Time spent on websites/domains"
echo "   â€¢ Tab management and navigation"
echo "   â€¢ Form interactions and downloads"
echo ""
echo "5. FILE SYSTEM MONITORING:"
echo "   â€¢ Files opened, saved, created, deleted"
echo "   â€¢ File paths, sizes, and types"
echo "   â€¢ Access permissions and timestamps"
echo "   â€¢ Application file associations"
echo ""
echo "6. SCREEN CAPTURE:"
echo "   â€¢ Automated screenshots every 30 seconds"
echo "   â€¢ Context-aware metadata capture"
echo "   â€¢ Multi-monitor support"
echo "   â€¢ Encrypted storage with thumbnails"
echo ""
echo "7. PRODUCTIVITY ANALYTICS:"
echo "   â€¢ Real-time productivity scoring (0-100%)"
echo "   â€¢ Application categorization (productive/neutral/distracting)"
echo "   â€¢ Time distribution analysis"
echo "   â€¢ Activity pattern recognition"
echo ""

echo "ğŸš€ STARTING FLUTTER APPLICATION:"
echo "================================"
echo ""
echo "The Flutter app will launch with comprehensive monitoring capabilities."
echo "You can:"
echo "  1. Login with any demo account"
echo "  2. Navigate to 'Detailed Monitoring' in Quick Actions"
echo "  3. Start comprehensive monitoring"
echo "  4. View real-time activity data across 8 detailed tabs"
echo "  5. Export your complete activity data"
echo ""

# Try to run Flutter app
echo "ğŸ”„ Launching Flutter application..."
flutter run -d macos --dart-define=API_BASE_URL=http://localhost:3001/v1 --dart-define=MOCK_DATA=true

echo ""
echo "ğŸ“š DOCUMENTATION:"
echo "================"
echo "ğŸ“– Comprehensive Guide: COMPREHENSIVE_MONITORING_GUIDE.md"
echo "ğŸ—ï¸  Architecture: ENTERPRISE_ARCHITECTURE.md"
echo "ğŸ”§ Setup Guide: SETUP_GUIDE.md"
echo "ğŸ“‹ Project Summary: PROJECT_SUMMARY.md"
echo ""
echo "ğŸ‰ Demo completed! The comprehensive monitoring system is ready for use."